<!DOCTYPE html>
<html>
<head>
    <title>HOCHABOO Booth</title>
    <style>
        body { background: #fff8e7; font-family: sans-serif; text-align: center; padding: 20px; }
        .card { max-width: 450px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        canvas { width: 100%; border-radius: 10px; margin-top: 20px; background: #fff8e7; border: 1px solid #ddd; }
        .nav { display: flex; gap: 10px; margin-bottom: 15px; }
        button { flex: 1; padding: 12px; border: 2px solid #8b5e34; border-radius: 10px; cursor: pointer; background: white; color: #8b5e34; font-weight: bold; }
        button.active { background: #8b5e34; color: white; }
        .submit-btn { background: #28a745; color: white; border: none; padding: 15px; width: 100%; font-size: 18px; border-radius: 10px; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>
<div class="card">
    <h2 style="color: #8b5e34;">HOCHABOO Photo Booth</h2>
    <div class="nav">
        <button id="btnA" class="active" onclick="setDesign('A')">Design A</button>
        <button id="btnB" onclick="setDesign('B')">Design B</button>
    </div>
    <input type="file" id="files" accept="image/*" multiple>
    <canvas id="boothCanvas" width="1200" height="1800"></canvas>
    <button class="submit-btn" onclick="sendToAdmin()">Submit to Admin</button>
    <p id="status"></p>
</div>

<script>
    const canvas = document.getElementById('boothCanvas');
    const ctx = canvas.getContext('2d');
    let design = 'A';
    let images = [];

    // Job: Update these names to match your exact file names on GitHub
    const frames = { 'A': 'DesignA-2.png', 'B': 'DesignB-3.png' };

    function setDesign(type) {
        design = type;
        document.getElementById('btnA').className = (type === 'A' ? 'active' : '');
        document.getElementById('btnB').className = (type === 'B' ? 'active' : '');
        updateCanvas();
    }

    document.getElementById('files').onchange = (e) => {
        images = Array.from(e.target.files).map(f => URL.createObjectURL(f));
        updateCanvas();
    };

    function updateCanvas() {
        ctx.fillStyle = "#fff8e7";
        ctx.fillRect(0, 0, 1200, 1800);
        const frame = new Image();
        frame.src = frames[design];
        frame.onload = () => {
            if (images.length >= 4) {
                let loaded = 0;
                images.slice(0, 4).forEach((src, i) => {
                    const img = new Image();
                    img.src = src;
                    img.onload = () => {
                        const w = 530, h = 760;
                        const x = (i % 2 === 0) ? 50 : 620;
                        const y = (i < 2) ? 65 : 880;
                        ctx.drawImage(img, x, y, w, h);
                        if (++loaded === 4) ctx.drawImage(frame, 0, 0, 1200, 1800);
                    };
                });
            } else { ctx.drawImage(frame, 0, 0, 1200, 1800); }
        };
    }

    function sendToAdmin() {
        const stat = document.getElementById('status');
        stat.innerText = "Sending...";
        const finalImage = canvas.toDataURL('image/png');
        
        fetch('https://formspree.io/f/mzddayey', { 
            method: 'POST',
            body: JSON.stringify({ photo: finalImage }),
            headers: { 'Content-Type': 'application/json' }
        }).then(() => { stat.innerText = "Sent! Check your email."; });
    }
</script>
</body>
</html>
